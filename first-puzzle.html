<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="styles.css">
<head>
    <meta charset="UTF-8">
    <title>First Puzzle</title>
</head>
<body>
<a href="./index.html">Home</a>

<h1>Voltooi voor een gratis koelkast!</h1>

<p>Klik drie boxjes in de juiste volgorde aan om te winnen.</p>

<!-- implementeer CSS GRID-->

<div class="container">
    <div id="A" class="box a" data-hint="Aap" >
        A
    </div>
    <div id="B" class="box b" data-hint="Banaan">
        B
    </div>
    <div id="C" class="box c" data-hint="Comkommer">
        C
    </div>
    <div id="D" class="box d" data-hint="Dinosaurus">
        D
    </div>
    <div id="E" class="box e" data-hint="Ei">
        E
    </div>
    <div id="F" class="box f" data-hint="Factorio">
        F
    </div>
    <div id="G" class="box g" data-hint="Gay">
        G
    </div>
    <div id="H" class="box h" data-hint="Hallo">
        H
    </div>
    <div id="I" class="box i" data-hint="Iris">
        I
    </div>
</div>

<h2>Gebruik deze hint</h2>
<span id="hint"></span>

<p>Jouw antwoord:</p>
<p id="p1"></p>

<button onclick="reset()">RESET</button>

<!--CSS: make it look nice (: -->
<script>
    let userInput = [];
    let solution = null;
    const boxjes = Array.from(document.getElementsByClassName('box'));

    setNewSolution();

    let currentAnswerIndex = 0;

    updateHint(getBoxje(solution[currentAnswerIndex]));

    boxjes.forEach((boxje, boxjeIndex) => {
        boxje.addEventListener('click', function () {
            if(checkAnswer(boxje)) {
                userInput.push(boxje.id)
                document.getElementById("p1").innerHTML = userInput;
                currentAnswerIndex++;

                if(checkWinCondition() === false) {
                    // todo: make sure this doesnt break non-existent answers
                    updateHint(getBoxje(solution[currentAnswerIndex]))
                }

                boxjes.forEach((boxje) => {
                    boxje.classList.remove('error');
                });
            } else {
                boxje.classList.add('error');
            }
        });
    });

    function setNewSolution() {
        solution = [];

        const amountOfLetters = 5;
        
        for(let i = 0; i < amountOfLetters; i++){
            solution.push(boxjes[getRandomArbitrary(0, boxjes.length - 1)].id);
        }
    }

    function getRandomArbitrary(min, max) {
        return Math.ceil(Math.random() * (max - min) + min);
    }

    function getBoxje(solutionId) {
        return document.getElementById(solutionId);
    }

    function checkAnswer(boxje) {
        return solution[currentAnswerIndex] === boxje.id;
    }

    function checkWinCondition () {
        if (userInput.toString() === solution.toString()) {
            alert('JE HEBT GEWONNEN');
        } else {
            return false;
        }
    }

    function updateHint (boxje) {
        document.getElementById("hint").innerHTML = boxje.dataset.hint;
    }

    function reset() {
        userInput = [];
        document.getElementById("p1").innerHTML = userInput;
        currentAnswerIndex = 0;

        setNewSolution();
        updateHint(getBoxje(solution[0]));

        boxjes.forEach((boxje) => {
            boxje.classList.remove('error');
        });
    }
</script>
</body>
</html>